#:kivy 1.11.1
#:import Factory kivy.factory.Factory

<WarningPopup@Popup>:
    auto_dismiss: False
    title: 'Warning'
    title_color: 1, .4, .4, 1
    separator_color: 1, .4, .4, 1
    size_hint_y: None
    height: '200dp'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: 'Delete this guide?'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: '40dp'
            Button:
                text: 'Cancel'
                on_release: root.dismiss()
            Button:
                text: 'Delete'
                on_release:
                    print('Guide deleted')
                    root.dismiss()

<GuideAssignedTag>:
    text: ''
    size_hint: None, None
    size: self.texture_size
    padding: '8dp', '4dp'
    background_normal: ''
    color: 1, 1, 1, 1
    background_color: 0, .7, .7, 1
    on_release: app.root.show_tag_screen(self.text)

<GuideAssignedTagsList>:
    size_hint_y: None
    height: self.minimum_height
    spacing: '2dp'

<GuideScreen>:
    guide_icon: None
    guide_title: ''
    guide_description: ''
    guide_lang: None
    guide_from_place: ''
    guide_to_place: ''
    BoxLayout:
        orientation: 'vertical'
        padding: '4dp'
        spacing: '4dp'
        canvas:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        TitleBar:
            title: 'Guide'
        ScrollView:
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                spacing: '8dp'
                padding: '4dp'
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: '80dp'
                    AnchorLayout:
                        anchor_x: 'center'
                        anchor_y: 'center'
                        size_hint_x: None
                        width: self.height
                        padding: '8dp'
                        Image:
                            source: root.guide_icon
                    Label:
                        text: root.guide_title
                        font_size: '24dp'
                        bold: True
                        text_size: self.size
                        valign: 'middle'
                        color: .2, .2, .2, 1
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: '40dp'
                    Label:
                        text: 'From: ' + root.guide_from_place
                        font_size: '20dp'
                        color: .2, .2, .2, 1
                    Label:
                        text: 'To: ' + root.guide_to_place
                        font_size: '20dp'
                        color: .2, .2, .2, 1
                Label:
                    text: root.guide_description
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    font_size: '18dp'
                    color: .4, .4, .4, 1
                BoxLayout:
                    id: container
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                AnchorLayout:
                    anchor_x: 'center'
                    anchor_y: 'center'
                    size_hint_y: None
                    height: '80dp'
                    padding: '8dp'
                    Button:
                        text: 'Delete the guide'
                        font_size: '18dp'
                        color: 1, .4, .4, 1
                        background_normal: ''
                        on_release: Factory.WarningPopup().open()
                        canvas:
                            Color:
                                rgba: 1, .4, .4, 1
                            Line:
                                width: 1
                                rectangle: self.x, self.y, self.width, self.height
