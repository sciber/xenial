#:kivy 1.11.1

#:import join_path os.path.join
#:import guides models.guides

#:set categories_menu_item_width dp(120)
#:set categories_menu_item_height dp(140)

<CategoriesMenuItem@Button>:
    category_icon: ''
    category_name: ''
    background_normal: ''
    on_release: app.root.show_category_screen(self.category_name)
    BoxLayout:
        orientation: 'vertical'
        pos: self.parent.pos
        size_hint: None, None
        size: self.parent.size
        AnchorLayout:
            anchor_x: 'center'
            anchor_y: 'center'
            size_hint_y: .6
            padding: '8dp'
            Image:
                source:
                    join_path(guides.active_guide_path, 'icons', 'categories', root.category_icon) if root.category_icon else None
        Label:
            text: root.category_name
            color: .2, .2, .2, 1
            font_size: '16dp'
            size_hint_y: .4
            text_size: self.size[0] - dp(8), self.size[1]
            padding: '4dp', 0
            halign: 'center'
            valign: 'top'

<CategoriesMenu@RecycleView>:
    viewclass: 'CategoriesMenuItem'
    RecycleGridLayout:
        cols: int(root.width // categories_menu_item_width) or 1
        default_size: categories_menu_item_width, categories_menu_item_height
        default_size_hint: None, None
        size_hint: 1, None
        height: self.minimum_height
