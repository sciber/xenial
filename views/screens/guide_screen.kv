#:kivy 1.11.1

#:import Factory kivy.factory.Factory

#:import translator translator.translator

<UnloadGuideWarningPopup>:
    guide_name: ''
    guide_title: ''
    auto_dismiss: False
    title: translator.translate('Warning', translator.active_lang_code)
    title_color: 1, .4, .4, 1
    separator_color: 1, .4, .4, 1
    size_hint_y: None
    height: '200dp'
    BoxLayout:
        orientation: 'vertical'
        Label:
            text:
                (translator.translate('Delete guide', translator.active_lang_code
                ) + '\n"[b]{}[/b]"?').format(root.guide_title)
            markup: True
            text_size: self.size
            valign: 'middle'
            halign: 'center'
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: '40dp'
            Button:
                text: translator.translate('Cancel', translator.active_lang_code)
                on_release: root.dismiss()
            Button:
                text: translator.translate('Delete', translator.active_lang_code)
                on_release:
                    root.dismiss()
                    app.root.unload_guide(root.guide_name)

<GuideScreen>:
    name: 'guide'
    guide_name: ''
    guide_icon: ''
    guide_title: ''
    guide_description: ''
    guide_lang: ('', '')
    guide_from_place: ''
    guide_to_place: ''
    guide_tags: []
    BoxLayout:
        orientation: 'vertical'
        padding: '4dp'
        spacing: '4dp'
        canvas:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
        ScreenTitleBar:
            title: translator.translate('Guide', translator.active_lang_code)
        ScrollView:
            BoxLayout:
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                spacing: '8dp'
                padding: '4dp'
                BoxLayout:
                    orientation: 'horizontal'
                    size_hint_y: None
                    height: '80dp'
                    AnchorLayout:
                        anchor_x: 'center'
                        anchor_y: 'center'
                        size_hint_x: None
                        width: self.height
                        padding: '8dp'
                        Image:
                            source: root.guide_icon
                    Label:
                        text: root.guide_title
                        font_size: '24dp'
                        bold: True
                        text_size: self.size
                        valign: 'middle'
                        color: .2, .2, .2, 1
                Label:
                    text:
                        (translator.translate('Language', translator.active_lang_code) + ': [b]{}[/b]'
                        ).format(root.guide_lang[0])
                    markup: True
                    text_size: self.size
                    font_size: '18dp'
                    halign: 'left'
                    valign: 'middle'
                    size_hint_y: None
                    height: '20dp'
                    color: .4, .4, .4, 1
                Label:
                    text:
                        (translator.translate('From', translator.active_lang_code) + ': [b]{}[/b]'
                        ).format(root.guide_from_place)
                    markup: True
                    text_size: self.size
                    font_size: '18dp'
                    halign: 'left'
                    valign: 'middle'
                    size_hint_y: None
                    height: '20dp'
                    color: .4, .4, .4, 1
                Label:
                    text:
                        (translator.translate('To', translator.active_lang_code) + ': [b]{}[/b]'
                        ).format(root.guide_to_place)
                    markup: True
                    text_size: self.size
                    font_size: '18dp'
                    halign: 'left'
                    valign: 'middle'
                    size_hint_y: None
                    height: '20dp'
                    color: .4, .4, .4, 1
                BoxLayout:
                    id: tagslist_container
                    orientation: 'vertical'
                    size_hint_y: None
                    height: self.minimum_height
                Label:
                    text: root.guide_description
                    markup: True
                    size_hint_y: None
                    text_size: self.width, None
                    height: self.texture_size[1]
                    font_size: '18dp'
                    color: .2, .2, .2, 1
        Button:
            text: translator.translate('Delete guide', translator.active_lang_code)
            font_size: '18dp'
            color: 0, 0, 0, 1
            background_normal: ''
            background_color: .8, .2, .2, 1
            size_hint_y: None
            height: '60dp'
            on_release:
                Factory.UnloadGuideWarningPopup(guide_name=root.guide_name, guide_title=root.guide_title).open()
